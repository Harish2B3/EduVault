<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Student Portal - Sphoorthy Engineering College</title>
    <style>
        :root {
            --primary-color: #3a0ca3;
            --secondary-color: #4361ee;
            --accent-color: #4cc9f0;
            --light-bg: #f8f9fa;
            --dark-bg: #212529;
        }

        body {
            background-color: var(--light-bg);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .profile-icon {
            width: 36px !important;
            height: 36px !important;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .navbar {
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            padding: 12px 0;
        }

        /* Navbar text styling */
        .navbar h2 {
            color: white;
            font-weight: 600;
            margin-bottom: 0;
            font-size: 1.5rem;
        }

        .navbar h2 span {
            font-weight: 400;
            opacity: 0.9;
            color: white;
        }

        .navbar ul li a {
            color: white !important;
            font-weight: 500;
            transition: all 0.3s;
            margin: 0 5px;
            padding: 8px 15px !important;
            border-radius: 8px;
        }

        .navbar ul li a:hover, .navbar ul li a.active {
            color: white !important;
            background-color: rgba(255,255,255,0.15);
            transform: translateY(-2px);
        }

        /* Dropdown menu styling */
        .dropdown-menu {
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border: none;
            padding: 10px;
            background-color: white;
        }

        .dropdown-item {
            border-radius: 8px;
            padding: 8px 15px;
            transition: all 0.2s;
            color: #212529 !important; /* Black text for dropdown items */
        }

        .dropdown-item:hover {
            background-color: rgba(67, 97, 238, 0.1);
            transform: translateX(5px);
            color: #212529 !important; /* Keep text black on hover */
        }

        .dropdown-item.active {
            background-color: rgba(67, 97, 238, 0.2);
            color: #212529 !important; /* Keep text black when active */
        }

        .dashboard-container {
            padding: 30px 0;
        }

        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: transform 0.3s, box-shadow 0.3s;
            overflow: hidden;
            height: 100%;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .card-header {
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            color: white;
            font-weight: 600;
            border: none;
        }

        .quick-access-btn {
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s;
            background-color: white;
            color: var(--dark-bg);
            border: 1px solid #e9ecef;
            height: 100%;
            cursor: pointer;
        }

        .quick-access-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .quick-access-btn i {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .search-form {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }

        .announcement-item {
            border-left: 4px solid var(--accent-color);
            padding-left: 15px;
            margin-bottom: 15px;
        }

        .announcement-date {
            color: #6c757d;
            font-size: 0.85rem;
        }

        .progress {
            height: 10px;
            border-radius: 5px;
        }

        .calendar-event {
            padding: 8px;
            border-radius: 5px;
            margin-bottom: 8px;
            background-color: rgba(67, 97, 238, 0.1);
            border-left: 3px solid var(--secondary-color);
        }

        .footer {
            background-color: var(--dark-bg);
            color: white;
            padding: 20px 0;
            margin-top: 40px;
        }

        .chart-container {
            position: relative;
            height: 250px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .quick-access-btn i {
                font-size: 20px;
            }
            .quick-access-btn span {
                font-size: 14px;
            }
        }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
  </head>
  <body>
    {{#each std_data}}
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg sticky-top">
        <div class="container-fluid px-4">
            <h2><i class="bi bi-mortarboard me-2"></i>Welcome <span>{{this.Student_id}}</span></h2>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="/{{this.Student_id}}/homepage">
                            <i class="bi bi-house-door me-1"></i> Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/{{this.Student_id}}/upload">
                            <i class="bi bi-upload me-1"></i> Upload
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/{{this.Student_id}}/certificate">
                            <i class="bi bi-award me-1"></i> Certificate
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <img src="/uploaded_images/{{this.pp}}" alt="Profile" class="profile-icon me-2">
                            <span>Profile</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="/{{this.Student_id}}/settings">
                                <i class="bi bi-gear me-2"></i> Settings
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/logout">
                                <i class="bi bi-box-arrow-right me-2"></i> Logout
                            </a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container dashboard-container">
        <!-- Welcome Banner -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-body p-4 d-flex flex-column flex-md-row align-items-center">
                        <img src="/uploaded_images/{{this.pp}}" alt="Profile" class="rounded-circle me-4 mb-3 mb-md-0" style="width: 100px; height: 100px; object-fit: cover; border: 3px solid var(--accent-color);">
                        <div class="text-center text-md-start">
                            <h2 class="mb-1">Welcome, {{this.student_name}}</h2>
                            <p class="text-muted mb-0">Student ID: {{this.Student_id}} | Email: {{this.Email}} | Phone: {{this.Phone_number}}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Access Buttons -->
        <div class="row mb-4">
            <div class="col-md-3 col-6 mb-3">
                <div class="quick-access-btn d-flex flex-column justify-content-center" onclick="showAttendance()">
                    <i class="bi bi-journal-text"></i>
                    <span>Attendance</span>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-3">
                <div class="quick-access-btn d-flex flex-column justify-content-center" onclick="showResults()">
                    <i class="bi bi-graph-up"></i>
                    <span>Results</span>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-3">
                <div class="quick-access-btn d-flex flex-column justify-content-center" onclick="showTimetable()">
                    <i class="bi bi-calendar-event"></i>
                    <span>Timetable</span>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-3">
                <div class="quick-access-btn d-flex flex-column justify-content-center" onclick="showAssignments()">
                    <i class="bi bi-file-earmark-text"></i>
                    <span>Assignments</span>
                </div>
            </div>
        </div>

        <!-- Main Content Sections -->
        <div class="row">
            <!-- Left Column -->
            <div class="col-lg-8">
                <!-- Attendance Charts Section -->
                <div id="attendanceSection" class="card mb-4">
                    <div class="card-header">
                        <i class="bi bi-bar-chart me-2"></i> Attendance Overview
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h5 class="text-center mb-3">Monthly Attendance</h5>
                                <div class="chart-container">
                                    <canvas id="attendanceChart"></canvas>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h5 class="text-center mb-3">Yearly Attendance</h5>
                                <div class="chart-container">
                                    <canvas id="attendanceBarChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Results Section (Initially Hidden) -->
                <div id="resultsSection" class="card mb-4" style="display: none;">
                    <div class="card-header">
                        <i class="bi bi-trophy me-2"></i> Academic Results
                    </div>
                    <div class="card-body">
                        <div class="mb-4">
                            <h5>JNTUH Results Lookup</h5>
                            <form action="/htno" method="post" class="search-form mb-3">
                                <div class="input-group">
                                    <input type="text" name="htno" class="form-control" placeholder="Enter Hall Ticket Number" value="{{this.Student_id}}">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-search me-2"></i> View Results
                                    </button>
                                </div>
                            </form>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Semester</th>
                                        <th>Subject</th>
                                        <th>Grade</th>
                                        <th>Credits</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1-1</td>
                                        <td>Mathematics-I</td>
                                        <td>A</td>
                                        <td>4</td>
                                        <td><span class="badge bg-success">Passed</span></td>
                                    </tr>
                                    <tr>
                                        <td>1-1</td>
                                        <td>Programming in C</td>
                                        <td>B+</td>
                                        <td>3</td>
                                        <td><span class="badge bg-success">Passed</span></td>
                                    </tr>
                                    <tr>
                                        <td>1-1</td>
                                        <td>Engineering Physics</td>
                                        <td>A+</td>
                                        <td>3</td>
                                        <td><span class="badge bg-success">Passed</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Timetable Section (Initially Hidden) -->
                <div id="timetableSection" class="card mb-4" style="display: none;">
                    <div class="card-header">
                        <i class="bi bi-calendar3-week me-2"></i> Weekly Timetable
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th width="100">Time/Day</th>
                                        <th>Monday</th>
                                        <th>Tuesday</th>
                                        <th>Wednesday</th>
                                        <th>Thursday</th>
                                        <th>Friday</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>9:00-10:00</td>
                                        <td>Data Structures</td>
                                        <td>DBMS</td>
                                        <td>Web Technologies</td>
                                        <td>Operating Systems</td>
                                        <td>Computer Networks</td>
                                    </tr>
                                    <tr>
                                        <td>10:00-11:00</td>
                                        <td>DBMS</td>
                                        <td>Web Technologies</td>
                                        <td>Operating Systems</td>
                                        <td>Computer Networks</td>
                                        <td>Data Structures</td>
                                    </tr>
                                    <tr>
                                        <td>11:15-12:15</td>
                                        <td>Web Technologies</td>
                                        <td>Operating Systems</td>
                                        <td>Computer Networks</td>
                                        <td>Data Structures</td>
                                        <td>DBMS</td>
                                    </tr>
                                    <tr>
                                        <td>12:15-1:15</td>
                                        <td colspan="5" class="text-center">Lunch Break</td>
                                    </tr>
                                    <tr>
                                        <td>1:15-4:15</td>
                                        <td>DS Lab</td>
                                        <td>DBMS Lab</td>
                                        <td>Web Tech Lab</td>
                                        <td>OS Lab</td>
                                        <td>Project Work</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Assignments Section (Initially Hidden) -->
                <div id="assignmentsSection" class="card mb-4" style="display: none;">
                    <div class="card-header">
                        <i class="bi bi-file-earmark-text me-2"></i> Assignments & Submissions
                    </div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="mb-1">Data Structures - Assignment 3</h6>
                                    <p class="text-muted mb-0 small">Implementation of Binary Search Trees</p>
                                </div>
                                <div class="text-end">
                                    <span class="badge bg-danger mb-2 d-block">Due: May 25, 2023</span>
                                    <a href="#" class="btn btn-sm btn-outline-primary">Submit</a>
                                </div>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="mb-1">DBMS - Assignment 2</h6>
                                    <p class="text-muted mb-0 small">ER Diagram for Library Management System</p>
                                </div>
                                <div class="text-end">
                                    <span class="badge bg-success mb-2 d-block">Submitted</span>
                                    <a href="#" class="btn btn-sm btn-outline-secondary">View Feedback</a>
                                </div>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="mb-1">Web Technologies - Assignment 4</h6>
                                    <p class="text-muted mb-0 small">Create a responsive website using Bootstrap</p>
                                </div>
                                <div class="text-end">
                                    <span class="badge bg-warning mb-2 d-block">Due: May 30, 2023</span>
                                    <a href="#" class="btn btn-sm btn-outline-primary">Submit</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Notifications Section -->
                <div class="card mb-4">
                    <div class="card-header">
                        <i class="bi bi-bell me-2"></i> Notifications
                    </div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item d-flex justify-content-between align-items-start px-0">
                                <div>
                                    <div class="fw-bold">Exam schedule updated</div>
                                    <div class="text-muted small">End semester exams start from June 10th</div>
                                </div>
                                <span class="badge bg-primary rounded-pill">New</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-start px-0">
                                <div>
                                    <div class="fw-bold">Annual day on Jan 20th</div>
                                    <div class="text-muted small">Register for cultural events by Jan 15th</div>
                                </div>
                                <span class="badge bg-secondary rounded-pill">3d ago</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-start px-0">
                                <div>
                                    <div class="fw-bold">New assignment in Maths</div>
                                    <div class="text-muted small">Due date: Jan 25th</div>
                                </div>
                                <span class="badge bg-secondary rounded-pill">5d ago</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-start px-0">
                                <div>
                                    <div class="fw-bold">Holiday on Jan 15th</div>
                                    <div class="text-muted small">On account of Sankranti festival</div>
                                </div>
                                <span class="badge bg-secondary rounded-pill">1w ago</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="col-lg-4">
                <!-- Academic Progress -->
                <div class="card mb-4">
                    <div class="card-header">
                        <i class="bi bi-graph-up me-2"></i> Academic Progress
                    </div>
                    <div class="card-body">
                        <div class="mb-4">
                            <div class="d-flex justify-content-between mb-1">
                                <span>Current Semester CGPA</span>
                                <span>7.8/10</span>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-success" role="progressbar" style="width: 78%"></div>
                            </div>
                        </div>
                        <div class="mb-4">
                            <div class="d-flex justify-content-between mb-1">
                                <span>Attendance</span>
                                <span>85%</span>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-info" role="progressbar" style="width: 85%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="d-flex justify-content-between mb-1">
                                <span>Assignment Completion</span>
                                <span>92%</span>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-primary" role="progressbar" style="width: 92%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Announcements -->
                <div class="card mb-4">
                    <div class="card-header">
                        <i class="bi bi-megaphone me-2"></i> Announcements
                    </div>
                    <div class="card-body">
                        <div class="announcement-item">
                            <h6 class="mb-1">End Semester Examination Schedule</h6>
                            <p class="announcement-date mb-1">Posted on May 15, 2023</p>
                            <p class="mb-0">The end semester examinations will commence from June 10, 2023.</p>
                        </div>
                        <div class="announcement-item">
                            <h6 class="mb-1">Technical Symposium</h6>
                            <p class="announcement-date mb-1">Posted on May 10, 2023</p>
                            <p class="mb-0">Annual technical symposium "TechFest 2023" will be held on May 25-26.</p>
                        </div>
                        <div class="announcement-item">
                            <h6 class="mb-1">Placement Drive</h6>
                            <p class="announcement-date mb-1">Posted on May 5, 2023</p>
                            <p class="mb-0">TCS campus recruitment drive scheduled for May 20, 2023.</p>
                        </div>
                    </div>
                </div>

                <!-- Upcoming Events -->
                <div class="card mb-4">
                    <div class="card-header">
                        <i class="bi bi-calendar3 me-2"></i> Upcoming Events
                    </div>
                    <div class="card-body">
                        <div class="calendar-event">
                            <div class="d-flex justify-content-between">
                                <strong>Project Submission</strong>
                                <small>May 20</small>
                            </div>
                            <small>Database Management Systems</small>
                        </div>
                        <div class="calendar-event">
                            <div class="d-flex justify-content-between">
                                <strong>Technical Workshop</strong>
                                <small>May 22</small>
                            </div>
                            <small>AI & Machine Learning</small>
                        </div>
                        <div class="calendar-event">
                            <div class="d-flex justify-content-between">
                                <strong>Guest Lecture</strong>
                                <small>May 25</small>
                            </div>
                            <small>Career Opportunities in IT</small>
                        </div>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-link-45deg me-2"></i> Quick Links
                    </div>
                    <div class="card-body">
                        <div class="list-group">
                            <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                College Website
                                <i class="bi bi-box-arrow-up-right"></i>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                Library Portal
                                <i class="bi bi-box-arrow-up-right"></i>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                Academic Calendar
                                <i class="bi bi-box-arrow-up-right"></i>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                Fee Payment
                                <i class="bi bi-box-arrow-up-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer mt-auto">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4 mb-md-0">
                    <h5>Sphoorthy Engineering College</h5>
                    <p class="small">Providing quality education since 2004</p>
                    <p class="small">JNTUH Affiliated | AICTE Approved</p>
                </div>
                <div class="col-md-4 mb-4 mb-md-0">
                    <h5>Contact</h5>
                    <p class="small"><i class="bi bi-geo-alt"></i> Nadergul, Hyderabad, Telangana</p>
                    <p class="small"><i class="bi bi-telephone"></i> +91 1234567890</p>
                    <p class="small"><i class="bi bi-envelope"></i> info@sphoorthy.edu.in</p>
                </div>
                <div class="col-md-4">
                    <h5>Follow Us</h5>
                    <div class="d-flex gap-3">
                        <a href="#" class="text-white"><i class="bi bi-facebook fs-5"></i></a>
                        <a href="#" class="text-white"><i class="bi bi-twitter fs-5"></i></a>
                        <a href="#" class="text-white"><i class="bi bi-instagram fs-5"></i></a>
                        <a href="#" class="text-white"><i class="bi bi-linkedin fs-5"></i></a>
                    </div>
                </div>
            </div>
            <hr class="mt-4 mb-3" style="border-color: rgba(255,255,255,0.1);">
            <div class="text-center">
                <p class="small mb-0">© 2023 Sphoorthy Engineering College. All rights reserved.</p>
            </div>
        </div>
    </footer>
    {{/each}}

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        try {
            const attendanceData = JSON.parse(`{{{att_results}}}`);
            console.log("Parsed Attendance Data:", attendanceData);

            let totalPresent = 0;
            let totalAbsent = 0;

            Object.keys(attendanceData).forEach(month => {
                totalPresent += attendanceData[month].present_count;
                totalAbsent += attendanceData[month].absent_count;
            });

            // Pie Chart
            new Chart(document.getElementById('attendanceChart').getContext('2d'), {
                type: 'pie',
                data: {
                    labels: ['Present Days', 'Absent Days'],
                    datasets: [{
                        data: [totalPresent, totalAbsent],
                        backgroundColor: ['#4caf50', '#f44336']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });

            // Bar Chart
            const months = Object.keys(attendanceData);
            const presentCounts = months.map(month => attendanceData[month].present_count);
            const absentCounts = months.map(month => attendanceData[month].absent_count);

            new Chart(document.getElementById('attendanceBarChart').getContext('2d'), {
                type: 'bar',
                data: {
                    labels: months,
                    datasets: [
                        {
                            label: 'Present',
                            data: presentCounts,
                            backgroundColor: '#4caf50',
                            borderColor: '#388e3c',
                            borderWidth: 1
                        },
                        {
                            label: 'Absent',
                            data: absentCounts,
                            backgroundColor: '#f44336',
                            borderColor: '#d32f2f',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    }
                }
            });
        } catch (error) {
            console.error("Error initializing charts:", error);
            // Create default charts with sample data if real data isn't available
            createDefaultCharts();
        }
    });

    function createDefaultCharts() {
        // Default Pie Chart
        new Chart(document.getElementById('attendanceChart').getContext('2d'), {
            type: 'pie',
            data: {
                labels: ['Present Days', 'Absent Days'],
                datasets: [{
                    data: [70, 30],
                    backgroundColor: ['#4caf50', '#f44336']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false
            }
        });

        // Default Bar Chart
        new Chart(document.getElementById('attendanceBarChart').getContext('2d'), {
            type: 'bar',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May'],
                datasets: [
                    {
                        label: 'Present',
                        data: [20, 25, 18, 22, 24],
                        backgroundColor: '#4caf50',
                        borderColor: '#388e3c',
                        borderWidth: 1
                    },
                    {
                        label: 'Absent',
                        data: [5, 3, 7, 8, 6],
                        backgroundColor: '#f44336',
                        borderColor: '#d32f2f',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            stepSize: 1
                        }
                    }
                }
            }
        });
    }

    function showAttendance() {
        document.getElementById('attendanceSection').style.display = 'block';
        document.getElementById('resultsSection').style.display = 'none';
        document.getElementById('timetableSection').style.display = 'none';
        document.getElementById('assignmentsSection').style.display = 'none';
    }

    function showResults() {
        document.getElementById('attendanceSection').style.display = 'none';
        document.getElementById('resultsSection').style.display = 'block';
        document.getElementById('timetableSection').style.display = 'none';
        document.getElementById('assignmentsSection').style.display = 'none';
    }

    function showTimetable() {
        document.getElementById('attendanceSection').style.display = 'none';
        document.getElementById('resultsSection').style.display = 'none';
        document.getElementById('timetableSection').style.display = 'block';
        document.getElementById('assignmentsSection').style.display = 'none';
    }

    function showAssignments() {
        document.getElementById('attendanceSection').style.display = 'none';
        document.getElementById('resultsSection').style.display = 'none';
        document.getElementById('timetableSection').style.display = 'none';
        document.getElementById('assignmentsSection').style.display = 'block';
    }
    </script>
  </body>
</html>
